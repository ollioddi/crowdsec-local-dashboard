services:
  dashboard:
    image: ghcr.io/ollioddi/crowdsec-dashboard:latest
    # build: .  # Uncomment to build from source instead of using the pre-built image
    ports:
      - "3000:3000"
    volumes:
      - db:/data
    environment:
      # ── Database ─────────────────────────────────────────────────────────────
      DATABASE_URL: file:/data/app.db

      # ── Auth ─────────────────────────────────────────────────────────────────
      # Generate a secret with: npx @better-auth/cli secret
      BETTER_AUTH_SECRET: ""
      # BETTER_AUTH_URL: ""  # Optional. Only needed if behind a reverse proxy where the inferred origin is wrong.

      # ── CrowdSec LAPI ─────────────────────────────────────────────────────────
      # Base URL of your CrowdSec LAPI, including port (e.g. http://192.168.1.100:8080).
      LAPI_URL: ""
      # From /etc/crowdsec/local_api_credentials.yaml on your CrowdSec host.
      LAPI_MACHINE_ID: ""
      LAPI_MACHINE_PASSWORD: ""
      # From: cscli bouncers add crowdsec-dashboard
      LAPI_BOUNCER_API_TOKEN: ""
      # How often (in seconds) to poll LAPI for decision updates. Default: 60.
      LAPI_POLL_INTERVAL: "60"

    restart: unless-stopped

volumes:
  db:
